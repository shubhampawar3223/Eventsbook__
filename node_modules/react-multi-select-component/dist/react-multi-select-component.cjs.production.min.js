"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("goober"),n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e;function a(e,r){var n=e.length,t=r.length,a=[];if(!n||!t)return 0;if(n<t){var o=[r,e];e=o[0],r=o[1]}if(-1!==e.indexOf(r))return t+1/n;for(var l=0;l<=n;++l)a[l]=[0];for(var i=0;i<=t;++i)a[0][i]=0;for(var c=1;c<=n;++c)for(var s=1;s<=t;++s)a[c][s]=e[c-1]===r[s-1]?1+a[c-1][s-1]:Math.max(a[c][s-1],a[c-1][s]);return a[n][t]}function o(e,r){if(!e)return"";if(e=e.toUpperCase().replace(/((?=[^\u00E0-\u00FC])\W)|_/g,""),!r)return e;var n=r;return Object.keys(n).reduce((function(e,r){var t=new RegExp(r,"g");return e.replace(t,n[r])}),e)}var l={selectSomeItems:"Select...",allItemsAreSelected:"All items are selected.",selectAll:"Select All",search:"Search"};function i(e,r){return(null==r?void 0:r[e])||l[e]}var c,s=r.css({"& input,& span":{verticalAlign:"middle",margin:0},span:{display:"inline-block",paddingLeft:"5px"},"&.disabled":{opacity:.5}}),d=function(e){var r=e.option,n=e.disabled;return t.createElement("div",{className:s+" item-renderer "+(n&&"disabled")},t.createElement("input",{type:"checkbox",onChange:e.onClick,checked:e.checked,tabIndex:-1,disabled:n}),t.createElement("span",null,r.label))},u=r.css({boxSizing:"border-box",cursor:"pointer",display:"block",padding:"var(--rmsc-p)",outline:0,"&:hover,&:focus":{background:"var(--rmsc-hover)"},"&.selected":{background:"var(--rmsc-selected)"}}),f=function(e){var r=e.itemRenderer,a=void 0===r?d:r,o=e.option,l=e.checked,i=e.focused,c=e.tabIndex,s=e.disabled,f=e.onSelectionChanged,m=e.onClick,p=n.useRef();n.useEffect((function(){h()}),[i]);var v=function(){f(!l)},h=function(){i&&!s&&p&&p.current.focus()};return t.createElement("label",{className:u+" select-item "+(l&&"selected"),role:"option","aria-selected":l,tabIndex:c,ref:p,onKeyDown:function(e){switch(e.which){case 13:case 32:v();break;default:return}e.preventDefault()}},t.createElement(a,{option:o,checked:l,onClick:function(e){v(),m(e)},disabled:s}))},m=r.css({margin:0,paddingLeft:0,li:{listStyle:"none",margin:0}}),p=function(e){var r=e.value,n=e.onChange,a=e.disabled,o=e.ItemRenderer,l=e.focusIndex,i=e.onClick;return t.createElement("ul",{className:m},e.options.map((function(e,c){var s=c+2;return t.createElement("li",{key:e.hasOwnProperty("key")?e.key:c},t.createElement(f,{focused:l===s,tabIndex:s,option:e,onSelectionChanged:function(t){return o=e,void(a||n(t?[].concat(r,[o]):r.filter((function(e){return e.value!==o.value}))));var o},checked:!!r.find((function(r){return r.value===e.value})),onClick:function(e){return i(e,s)},itemRenderer:o,disabled:e.disabled||a}))})))};!function(e){e[e.SEARCH=-1]="SEARCH",e[e.NONE=1]="NONE"}(c||(c={}));var v=r.css({width:"100%",borderBottom:"1px solid var(--rmsc-border)",input:{height:"var(--rmsc-h)",padding:"0 var(--rmsc-p)",width:"100%",outline:0,border:0}}),h=function(e){var r=e.onChange,l=e.options,s=e.value,d=e.filterOptions,u=e.selectAllLabel,m=e.ItemRenderer,h=e.disabled,g=e.disableSearch,b=e.focusSearchOnOpen,x=e.hasSelectAll,E=e.overrideStrings,k=n.useState(""),S=k[0],w=k[1],y=n.useState(b&&!g?c.SEARCH:c.NONE),C=y[0],R=y[1],A=n.useState(),N=A[0],O=A[1],I={label:u||i("selectAll",E),value:""};n.useEffect((function(){O(D(!0).length)}),[l]);var D=function(e){var r=s.map((function(e){return e.value}));return l.filter((function(n){var t=n.disabled,a=n.value;return e?!t||r.includes(a):t&&r.includes(a)}))},M=function(e){return R(e)},H=function(e){var r=C+e;r=Math.max(1,r),r=Math.min(r,l.length),R(r)};return t.createElement("div",{className:"select-panel",role:"listbox",onKeyDown:function(e){switch(e.which){case 38:if(e.altKey)return;H(-1);break;case 40:if(e.altKey)return;H(1);break;default:return}e.stopPropagation(),e.preventDefault()}},!g&&t.createElement("div",{className:v},t.createElement("input",{autoFocus:b,placeholder:i("search",E),type:"search","aria-describedby":i("search",E),onChange:function(e){w(e.target.value),R(c.SEARCH)},onFocus:function(){R(c.SEARCH)}})),x&&!S&&t.createElement(f,{focused:1===C,tabIndex:1,checked:N===s.length,option:I,onSelectionChanged:function(e){var n=D(e);r(n)},onClick:function(){return M(0)},itemRenderer:m,disabled:h}),t.createElement(p,Object.assign({},e,{options:d?d(l,S):function(e,r,n){if(!r)return e;var t=o(r,void 0);return e.filter((function(e){return null!=e.label&&null!=e.value})).map((function(e){return{option:e,score:a(o(e.label,void 0),t)}})).filter((function(e){return e.score>=t.length-2})).sort((function(e,r){return r.score-e.score})).map((function(e){return e.option}))}(l,S),focusIndex:C,onClick:function(e,r){return M(r)},ItemRenderer:m,disabled:h})))};function g(e){return t.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray"},t.createElement("path",{d:e.expanded?"M18 15 12 9 6 15":"M6 9L12 15 18 9"}))}var b=r.css({animation:"rotate 2s linear infinite","& .path":{stroke:"var(--rmsc-border)",strokeWidth:"4px",strokeLinecap:"round",animation:"dash 1.5s ease-in-out infinite"},"@keyframes rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes dash":{"0%":{strokeDasharray:"1,150",strokeDashoffset:0},"50%":{strokeDasharray:"90,150",strokeDashoffset:"-35"},"100%":{strokeDasharray:"90,150",strokeDashoffset:"-124"}}});function x(e){var r=e.size,n=void 0===r?24:r;return t.createElement("span",{style:{width:n,marginRight:"0.2rem"}},t.createElement("svg",{width:n,height:n,className:b,viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"}},t.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})))}var E=r.css({position:"absolute",zIndex:1,top:"100%",width:"100%",paddingTop:"8px",".panel-content":{maxHeight:"300px",overflowY:"auto",borderRadius:"var(--rmsc-radius)",background:"var(--rmsc-bg)",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.1), 0 4px 11px rgba(0, 0, 0, 0.1)"}}),k=r.css({position:"relative",outline:0,backgroundColor:"var(--rmsc-bg)",border:"1px solid var(--rmsc-border)",borderRadius:"var(--rmsc-radius)","&:focus-within":{boxShadow:"var(--rmsc-main) 0 0 0 1px",borderColor:"var(--rmsc-main)"}}),S=r.css({position:"relative",padding:"0 var(--rmsc-p)",display:"flex",alignItems:"center",width:"100%",height:"var(--rmsc-h)",cursor:"default",outline:0,".dropdown-heading-value":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}}),w=function(e){var r=e.children,a=e.contentComponent,o=e.contentProps,l=e.isLoading,i=e.disabled,c=e.shouldToggleOnHover,s=e.labelledBy,d=e.onMenuToggle,u=e.ArrowRenderer,f=n.useState(!1),m=f[0],p=f[1],v=n.useState(!1),h=v[0],b=v[1],w=u||g,y=n.useRef();n.useEffect((function(){d&&d(m)}),[m]);var C=function(e){c&&p(e)};return t.createElement("div",{tabIndex:0,className:k+" dropdown-container","aria-labelledby":s,"aria-expanded":m,"aria-readonly":!0,"aria-disabled":i,ref:y,onKeyDown:function(e){var r;switch(e.which){case 27:case 38:p(!1),null==y||null===(r=y.current)||void 0===r||r.focus();break;case 32:case 13:case 40:p(!0);break;default:return}e.preventDefault()},onFocus:function(){return!h&&b(!0)},onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||(b(!1),p(!1))},onMouseEnter:function(){return C(!0)},onMouseLeave:function(){return C(!1)}},t.createElement("div",{className:S+" dropdown-heading",onClick:function(){return p(!l&&!i&&!m)}},t.createElement("div",{className:"dropdown-heading-value"},r),l&&t.createElement(x,null),t.createElement(w,{expanded:m})),m&&t.createElement("div",{className:E+" dropdown-content"},t.createElement("div",{className:"panel-content"},t.createElement(a,Object.assign({},o)))))},y=function(e){var r=e.value,n=e.options,a=e.valueRenderer,o=e.overrideStrings,l=0===r.length,c=r.length===n.length,s=a&&a(r,n);return l?t.createElement("span",{className:"gray"},s||i("selectSomeItems",o)):t.createElement("span",null,s||(c?i("allItemsAreSelected",o):r.map((function(e){return e.label})).join(", ")))},C=r.css({"--rmscMain":"#4285f4","--rmscHover":"#f1f3f5","--rmscSelected":"#e2e6ea","--rmscBorder":"#ccc","--rmscGray":"#aaa","--rmscBg":"#fff","--rmscP":"10px","--rmscRadius":"4px","--rmscH":"38px","*":{boxSizing:"border-box",transition:"all 0.2s ease"},".gray":{color:"var(--rmsc-gray)"}});exports.Dropdown=w,exports.SelectItem=f,exports.SelectPanel=h,exports.default=function(e){var r=e.focusSearchOnOpen,n=e.hasSelectAll,a=e.className,o=e.options,l=e.overrideStrings,i=e.disabled,c=e.value||[];return t.createElement("div",{className:C+" "+(void 0===a?"multi-select":a)},t.createElement(w,{isLoading:e.isLoading,contentComponent:h,shouldToggleOnHover:e.shouldToggleOnHover,contentProps:{ItemRenderer:e.ItemRenderer,options:o,value:c,hasSelectAll:void 0===n||n,selectAllLabel:e.selectAllLabel,onChange:e.onChange,disabled:i,disableSearch:e.disableSearch,focusSearchOnOpen:void 0===r||r,filterOptions:e.filterOptions,overrideStrings:l},disabled:i,labelledBy:e.labelledBy,onMenuToggle:e.onMenuToggle,ArrowRenderer:e.ArrowRenderer},t.createElement(y,{value:c,options:o,valueRenderer:e.valueRenderer,overrideStrings:l})))};
//# sourceMappingURL=react-multi-select-component.cjs.production.min.js.map
